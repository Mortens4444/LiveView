CREATE PROCEDURE Select_All_IOPorts_Rules AS SELECT * FROM IOPorts_Rules ORDER BY device_id, port_num, operation_id, event_id;
CREATE PROCEDURE Insert_IOPorts_Rule @device_id bigint, @port_number int, @operation_id bigint = NULL, @event_id bigint = NULL, @zero_signaled bit AS INSERT INTO IOPorts_Rules (device_id, port_num, operation_id, event_id, zero_signaled) values (@device_id, @port_number, @operation_id, @event_id, @zero_signaled);
CREATE PROCEDURE Delete_IOPorts_Rule @ID bigint AS DELETE FROM IOPorts_Rules WHERE ID = @ID;
CREATE PROCEDURE Select_All_IOPorts_Logs AS SELECT * FROM IOPorts_Logs ORDER BY date DESC;
CREATE PROCEDURE Insert_IOPort_LogEntry @device_id int, @port_number int, @state int, @date datetime, @user_id bigint, @note nvarchar(max) AS INSERT INTO IOPorts_Logs (device_id, port_num, state, date, user_id, note) VALUES (@device_id, @port_number, @state, @date, @user_id, @note);
CREATE PROCEDURE Get_IOPort_Change_Count @device_id int, @port_number int, @D1 datetime, @D2 datetime AS SELECT COUNT(ID) FROM IOPorts_Logs WHERE (device_id = @device_id) AND (port_num = @port_number) AND date BETWEEN @D1 AND @D2;
CREATE PROCEDURE Select_All_IOPorts AS SELECT * FROM IOPorts ORDER BY device_id, port_num;
CREATE PROCEDURE Insert_IOPort @device_id int, @port_number int, @name nvarchar(255), @friendly_name nvarchar(255), @direction int, @state int, @min_trigger_time int, @max_count int AS INSERT INTO IOPorts (device_id, port_num, name, friendly_name, direction, state, min_trigger_time, max_count) VALUES (@device_id, @port_number, @name, @friendly_name, @direction, @state, @min_trigger_time, @max_count);
CREATE PROCEDURE Update_IOPort @friendly_name nvarchar(255), @max_count int, @min_trigger_time int, @device_id int, @port_number int AS UPDATE IOPorts SET friendly_name = @friendly_name, max_count = @max_count, min_trigger_time = @min_trigger_time WHERE (device_id = @device_id) AND (port_num = @port_number);
CREATE PROCEDURE Update_IOPort_State @name nvarchar(255), @direction int, @state int, @device_id int, @port_number int AS UPDATE IOPorts SET name = @name, direction = @direction, state = @state WHERE (device_id = @device_id) AND (port_num = @port_number);